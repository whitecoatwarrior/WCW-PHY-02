<meta name='viewport' content='width=device-width, initial-scale=1'/><meta name='viewport' content='width=device-width, initial-scale=1'/><meta name='viewport' content='width=device-width, initial-scale=1'/><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WHITE COAT WARRIORS</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* All CSS styles remain the same as in the original file */
        :root {
            --primary-blue: #1a56db;
            --secondary-blue: #0ea5e9;
            --dark-blue: #1e3a8a;
            --light-blue: #dbeafe;
            --accent-green: #10b981;
            --accent-orange: #f59e0b;
            --accent-red: #ef4444;
            --accent-purple: #8b5cf6;
            --accent-pink: #ec4899;
            --accent-teal: #14b8a6;
            --accent-yellow: #fbbf24;
            --accent-amber: #f59e0b;
            --vibrant-blue: #3b82f6;
            --vibrant-green: #22c55e;
            --vibrant-purple: #a855f7;
            --vibrant-pink: #e879f9;
            --gradient-blue: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
            --gradient-green: linear-gradient(135deg, var(--accent-green), #34d399);
            --gradient-orange: linear-gradient(135deg, var(--accent-orange), #f97316);
            --gradient-red: linear-gradient(135deg, var(--accent-red), #f87171);
            --gradient-purple: linear-gradient(135deg, var(--accent-purple), #a78bfa);
            --gradient-pink: linear-gradient(135deg, var(--accent-pink), #f472b6);
            --gradient-teal: linear-gradient(135deg, var(--accent-teal), #2dd4bf);
            --gradient-yellow: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
            --gradient-vibrant: linear-gradient(135deg, #4f46e5, #7c3aed, #ec4899);
            --shadow: 0 1px 2px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 2px 5px rgba(0, 0, 0, 0.08);
            --shadow-xl: 0 5px 15px -3px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 6px;
            color: #1e3a8a;
            font-size: 8.25px;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
            position: relative;
        }

        .logo {
            text-align: center;
            margin-bottom: 9px;
        }

        .logo h1 {
            font-size: 1.05rem;
            font-weight: 800;
            color: var(--dark-blue);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.08);
            margin-bottom: 1.5px;
            background: var(--gradient-vibrant);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo p {
            color: var(--primary-blue);
            font-weight: 600;
            font-size: 0.525rem;
        }

        .page {
            background: white;
            border-radius: 9px;
            padding: 9px;
            box-shadow: var(--shadow-xl);
            width: 100%;
            display: none;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: linear-gradient(to bottom right, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.7));
            backdrop-filter: blur(10px);
        }

        .active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(6px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .promo-banner {
            background: var(--gradient-vibrant);
            color: white;
            padding: 11.25px;
            border-radius: 7.5px;
            margin-bottom: 11.25px;
            text-align: center;
            font-size: 0.45rem;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }

        .promo-banner::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 100%);
            z-index: 1;
        }

        .promo-banner h2 {
            font-size: 0.675rem;
            margin-bottom: 6px;
            color: white;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
            position: relative;
            z-index: 2;
        }

        .promo-banner p {
            line-height: 1.4;
            text-align: justify;
            position: relative;
            z-index: 2;
        }

        .form-group {
            margin-bottom: 6px;
        }

        .form-label {
            display: block;
            margin-bottom: 1.5px;
            font-weight: 600;
            color: var(--dark-blue);
            font-size: 0.525rem;
        }

        .form-input, .form-select {
            width: 100%;
            padding: 4.5px 6.75px;
            border: 1.5px solid var(--light-blue);
            border-radius: 3.75px;
            font-size: 0.525rem;
            background: #f8fafc;
            transition: all 0.2s;
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 2px rgba(26, 86, 219, 0.15);
        }

        .input-container {
            position: relative;
        }

        .password-container .form-input {
            padding-right: 22.5px;
        }

        .input-icon {
            position: absolute;
            right: 7.5px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary-blue);
            font-size: 0.525rem;
            cursor: pointer;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 4.5px 7.5px;
            border: none;
            border-radius: 6px;
            font-weight: 700;
            font-size: 0.525rem;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            gap: 3px;
            width: 100%;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: var(--gradient-blue);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(26, 86, 219, 0.2);
        }

        .btn-contact {
            background: var(--gradient-green);
            color: white;
        }

        .btn-contact:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(16, 185, 129, 0.2);
        }

        .btn-whatsapp {
            background: linear-gradient(135deg, #25d366, #128c7e);
            color: white;
        }

        .btn-whatsapp:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(37, 211, 102, 0.2);
        }

        .btn-purple {
            background: var(--gradient-purple);
            color: white;
        }

        .btn-purple:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(139, 92, 246, 0.2);
        }

        .btn-red {
            background: var(--gradient-red);
            color: white;
        }

        .btn-red:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(239, 68, 68, 0.2);
        }

        .btn-orange {
            background: var(--gradient-orange);
            color: white;
        }

        .btn-orange:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(245, 158, 11, 0.2);
        }

        .error-box {
            background: #fee2e2;
            color: var(--accent-red);
            padding: 3.75px 5.25px;
            border-radius: 2.25px;
            margin-top: 4.5px;
            display: none;
            font-weight: 600;
            font-size: 0.525rem;
            border-left: 2.25px solid var(--accent-red);
        }

        .success-box {
            background: #d1fae5;
            color: var(--accent-green);
            padding: 3.75px 5.25px;
            border-radius: 2.25px;
            margin-top: 4.5px;
            display: none;
            font-weight: 600;
            font-size: 0.525rem;
            border-left: 2.25px solid var(--accent-green);
        }

        .notification-box {
            background: #fef3c7;
            color: #d97706;
            padding: 7.5px;
            border-radius: 4.5px;
            margin-top: 7.5px;
            font-weight: 600;
            font-size: 0.525rem;
            text-align: center;
            border-left: 3px solid #f59e0b;
        }

        .quiz-notification {
            position: fixed;
            top: 15px;
            right: 15px;
            background: white;
            padding: 11.25px;
            border-radius: 7.5px;
            box-shadow: var(--shadow-xl);
            z-index: 1000;
            display: none;
            max-width: 225px;
            border-left: 3.75px solid var(--accent-green);
            animation: slideInRight 0.3s ease;
            transform: translateX(100%);
        }

        .quiz-notification.show {
            display: block;
            transform: translateX(0);
        }

        .quiz-notification.warning {
            border-left-color: var(--accent-orange);
        }

        .quiz-notification.error {
            border-left-color: var(--accent-red);
        }

        .quiz-notification-content {
            display: flex;
            flex-direction: column;
            gap: 7.5px;
        }

        .quiz-notification-title {
            font-weight: 700;
            font-size: 0.6rem;
            color: var(--dark-blue);
        }

        .quiz-notification-message {
            font-size: 0.525rem;
            color: #4b5563;
        }

        .quiz-notification-actions {
            display: flex;
            gap: 6px;
            justify-content: flex-end;
        }

        .quiz-notification-btn {
            padding: 3px 6px;
            border-radius: 3px;
            font-size: 0.4875rem;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
        }

        .quiz-notification-btn.primary {
            background: var(--gradient-blue);
            color: white;
        }

        .quiz-notification-btn.secondary {
            background: #f3f4f6;
            color: #4b5563;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        .main-page-buttons {
            display: grid;
            gap: 6px;
            margin-top: 9px;
        }

        .quiz-access-section {
            display: none;
            flex-direction: column;
            gap: 6px;
            margin-top: 9px;
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 6px;
            padding-bottom: 4.5px;
            border-bottom: 1.5px solid var(--light-blue);
        }

        .quiz-title-container {
            display: flex;
            flex-direction: column;
            gap: 2.25px;
            width: 80%;
        }

        .quiz-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
            font-size: 0.525rem;
            color: var(--dark-blue);
            font-weight: 600;
        }

        .timer-container {
            display: flex;
            gap: 4.5px;
            justify-content: flex-end;
            width: 100%;
        }

        .timer, .question-timer {
            background: var(--gradient-blue);
            color: white;
            padding: 2.25px 4.5px;
            border-radius: 7.5px;
            font-weight: 700;
            font-size: 0.525rem;
            box-shadow: var(--shadow);
            white-space: nowrap;
        }

        .timer.total-timer {
            background: var(--gradient-orange);
        }

        .progress-container {
            width: 100%;
            height: 4.5px;
            background: #e5e7eb;
            border-radius: 2.25px;
            overflow: hidden;
            margin-bottom: 6px;
            box-shadow: var(--shadow);
        }

        .progress-bar {
            height: 100%;
            border-radius: 2.25px;
            transition: width 0.4s ease;
            background: var(--gradient-vibrant);
        }

        .question-nav {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(10.5px, 1fr));
            gap: 2.25px;
            margin-bottom: 6px;
        }

        .question-nav-item {
            width: 10.5px;
            height: 10.5px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 2.25px;
            font-weight: 700;
            font-size: 0.375rem;
            cursor: pointer;
            background: white;
            border: 1.5px solid var(--light-blue);
            transition: all 0.2s;
        }

        .question-nav-item.current {
            background: var(--gradient-vibrant);
            color: white;
            border-color: var(--primary-blue);
            transform: scale(1.1);
        }

        .question-nav-item.solved {
            background: var(--gradient-green);
            color: white;
            border-color: var(--accent-green);
        }

        .question-nav-item.visited {
            background: var(--gradient-orange);
            color: white;
            border-color: var(--accent-orange);
        }

        .question-container {
            margin-bottom: 6px;
        }

        .question-text {
            font-size: 0.5625rem;
            font-weight: 700;
            margin-bottom: 4.5px;
            color: var(--dark-blue);
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 3px;
            margin-bottom: 6px;
        }

        .option {
            padding: 3.75px 6px;
            border: 1.5px solid var(--light-blue);
            border-radius: 3.75px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
            background: #f8fafc;
            font-size: 0.525rem;
            position: relative;
        }

        .option:hover {
            border-color: var(--primary-blue);
            background: #e0f2fe;
            transform: translateY(-1px);
        }

        .option.selected {
            border-color: var(--primary-blue);
            background: #dbeafe;
        }

        .option.correct {
            border-color: var(--accent-green);
            background: #d1fae5;
        }

        .option.incorrect {
            border-color: var(--accent-red);
            background: #fee2e2;
        }

        .option input[type="radio"] {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }

        .reasoning {
            background: #f8fafc;
            border-radius: 3.75px;
            padding: 6px;
            margin-top: 6px;
            display: none;
            border-left: 2.25px solid var(--primary-blue);
            font-size: 0.525rem;
        }

        .reasoning-title {
            font-weight: 700;
            margin-bottom: 3px;
            color: var(--dark-blue);
            font-size: 0.5625rem;
        }

        .navigation-buttons {
            display: flex;
            flex-direction: column;
            gap: 3px;
            margin-top: 9px;
        }

        .nav-btn {
            padding: 3.75px 5.25px;
            border-radius: 3.75px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
            font-size: 0.525rem;
            display: flex;
            align-items: center;
            gap: 2.25px;
            justify-content: center;
            width: 100%;
        }

        .btn-back {
            background: linear-gradient(135deg, #3b82f6, #60a5fa);
            color: white;
        }

        .btn-next {
            background: linear-gradient(135deg, #1d4ed8, #3b82f6);
            color: white;
        }

        .btn-reasoning {
            background: var(--gradient-purple);
            color: white;
        }

        .btn-reasoning.disabled {
            background: #dc3545;
            color: white;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .btn-reasoning.disabled:hover {
            background: #dc3545;
            transform: none;
            box-shadow: none;
        }

        .btn-submit {
            background: var(--gradient-green);
            color: white;
        }

        .results-header-buttons {
            display: flex;
            flex-direction: column;
            gap: 3.75px;
            margin-bottom: 9px;
        }

        .results-header-buttons .btn {
            padding: 3px 4.5px;
            font-size: 0.4875rem;
            width: 100%;
        }

        .result-card {
            background: linear-gradient(135deg, #f8fafc, #e0f2fe);
            border-radius: 6px;
            padding: 9px;
            text-align: center;
            margin-bottom: 9px;
            box-shadow: var(--shadow);
            position: relative;
            z-index: 1;
            overflow: hidden;
        }

        .result-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-vibrant);
        }

        .result-card h2 {
            font-size: 0.675rem;
            margin-bottom: 6px;
            color: var(--dark-blue);
        }

        .result-card table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.525rem;
            margin-top: 6px;
            box-shadow: var(--shadow);
        }

        .result-card th, .result-card td {
            padding: 3.75px;
            border: 1px solid #dbeafe;
            text-align: left;
        }

        .result-card th {
            background-color: var(--light-blue);
            font-weight: 600;
        }

        .result-card td {
            background-color: #f8fafc;
        }

        .result-actions {
            display: flex;
            flex-direction: column;
            gap: 4.5px;
            margin-top: 9px;
        }

        .all-mcqs-list {
            display: flex;
            flex-direction: column;
            gap: 11.25px;
        }

        .all-mcq-item {
            padding: 7.5px;
            border: 1px solid var(--light-blue);
            border-radius: 6px;
            background: #f8fafc;
            position: relative;
        }

        .all-mcq-item .question-text {
            color: var(--dark-blue);
            font-size: 0.6rem;
            font-weight: 700;
        }

        .all-mcq-options {
            display: flex;
            flex-direction: column;
            gap: 3px;
            margin-top: 4.5px;
        }

        .all-mcq-option {
            font-size: 0.525rem;
            padding: 3px 4.5px;
            border-radius: 3px;
            border: 1px solid #e5e7eb;
        }

        .all-mcq-option.correct {
            background: #d1fae5;
            color: var(--accent-green);
            font-weight: 600;
            border-color: #a7f3d0;
        }

        .all-mcq-reasoning {
            margin-top: 6px;
            font-size: 0.525rem;
            color: #4b5563;
            padding: 6px;
            background: #f8fafc;
            border-radius: 3px;
            border-left: 2.25px solid var(--primary-blue);
        }

        .all-mcq-reasoning strong {
            color: var(--dark-blue);
        }

        .quick-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 9px;
            gap: 6px;
        }

        .stat-card {
            flex: 1;
            background: white;
            border-radius: 4.5px;
            padding: 6px;
            text-align: center;
            box-shadow: var(--shadow);
            border-top: 2px solid var(--primary-blue);
        }

        .stat-card.correct {
            border-top-color: var(--accent-green);
        }

        .stat-card.incorrect {
            border-top-color: var(--accent-red);
        }

        .stat-card.unanswered {
            border-top-color: var(--accent-orange);
        }

        .stat-value {
            font-size: 0.9rem;
            font-weight: 800;
            margin-bottom: 1.5px;
        }

        .stat-label {
            font-size: 0.4875rem;
            font-weight: 600;
            color: #6b7280;
        }

        .performance-meter {
            width: 100%;
            height: 6px;
            background: #e5e7eb;
            border-radius: 3px;
            overflow: hidden;
            margin: 6px 0;
        }

        .performance-fill {
            height: 100%;
            border-radius: 3px;
            transition: width 0.4s ease;
            background: var(--gradient-vibrant);
        }

        @media (max-width: 768px) {
            .quiz-header {
                flex-direction: column;
                gap: 4.5px;
                align-items: flex-start;
            }
            
            .navigation-buttons {
                grid-template-columns: 1fr;
            }
            
            .timer-container {
                position: relative;
                top: auto;
                right: auto;
                margin-top: 3.75px;
                justify-content: flex-end;
                width: 100%;
            }
            
            .quiz-title-container {
                width: 100%;
            }
            
            .result-actions {
                flex-direction: column;
            }
            
            .promo-banner {
                padding: 9px;
            }
            
            .promo-banner h2 {
                font-size: 0.6rem;
            }
            
            .promo-banner p {
                font-size: 0.4125rem;
            }
        }
    </style>
</head>
<body>
    <div class="quiz-notification" id="quiz-notification">
        <div class="quiz-notification-content">
            <div class="quiz-notification-title" id="notification-title">Quiz Progress Found</div>
            <div class="quiz-notification-message" id="notification-message">You have an unfinished quiz. Do you want to continue where you left off?</div>
            <div class="quiz-notification-actions">
                <button class="quiz-notification-btn secondary" id="notification-no">Start Fresh</button>
                <button class="quiz-notification-btn primary" id="notification-yes">Continue</button>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="logo">
            <h1>WHITE COAT WARRIORS</h1>
            <p>Excellence in Educational Assessment</p>
        </div>

        <div id="signin-page" class="page active">
            <div class="promo-banner">
                <h2><i class="fas fa-graduation-cap"></i> Unlock Your Potential with WHITE COAT WARRIORS</h2>
                <p>Boost your preparation with WHITE COAT WARRIORS's realistic online tests, crafted by experts to mirror the actual exam's pattern and challenge. Experience instant feedback, detailed analysis, and flexible online access – your pathway to confidence and success!</p>
            </div>
            
            <h2><i class="fas fa-lock"></i> Access Test</h2>
            <p>Sign in or use your access code</p>
            
            <div class="main-page-buttons">
                <button class="btn btn-primary" onclick="showQuizAccessForm()">
                    <i class="fas fa-key"></i>
                    <span>Sign In with Quiz Access Code</span>
                </button>
                <button class="btn btn-primary" onclick="showRegistrationPage()">
                    <i class="fas fa-user-plus"></i>
                    <span>Sign Up to Get Quiz Access</span>
                </button>
                <button class="btn btn-purple" onclick="showDeveloperAccessForm()">
                    <i class="fas fa-code"></i>
                    <span>Developer Access</span>
                </button>
            </div>
            
            <div id="developer-access-form" class="quiz-access-section">
                <h3><i class="fas fa-user-secret"></i> Developer Login</h3>
                <div class="password-container input-container">
                    <input type="password" id="developerPassword" class="form-input" placeholder="Enter the Developer Password">
                    <i class="fas fa-eye-slash input-icon" id="toggleDeveloperPassword"></i>
                </div>
                <button class="btn btn-purple" onclick="checkDeveloperPassword()">
                    <span>Log In</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
                <div id="dev-error-box" class="error-box">
                    <i class="fas fa-exclamation-circle"></i> Invalid developer password.
                </div>
            </div>
            
            <div id="quiz-access-form" class="quiz-access-section">
                <h3><i class="fas fa-key"></i> Enter Quiz Access Code</h3>
                <div class="password-container input-container">
                    <input type="password" id="quizAccessCode" class="form-input" placeholder="Enter your 12-Digit Quiz Access Code here">
                    <i class="fas fa-eye-slash input-icon" id="toggleQuizAccessCode"></i>
                </div>
                <button class="btn btn-primary" onclick="accessQuiz(document.getElementById('quizAccessCode').value)">
                    <span>Access Quiz</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
                <div id="quiz-error-box" class="error-box">
                    <i class="fas fa-exclamation-circle"></i> Invalid quiz access code.
                </div>
            </div>
            
        </div>

        <div id="registration-page" class="page">
            <div class="promo-banner">
                <h2><i class="fas fa-graduation-cap"></i> Unlock Your Potential with WHITE COAT WARRIORS</h2>
                <p>Boost your preparation with WHITE COAT WARRIORS's realistic online tests, crafted by experts to mirror the actual exam's pattern and challenge. Experience instant feedback, detailed analysis, and flexible online access – your pathway to confidence and success!</p>
            </div>
            
            <h2><i class="fas fa-user-edit"></i> Student Registration</h2>
            <p>Please provide your details to register</p>
            
            <div class="form-group">
                <label class="form-label"><i class="fas fa-user"></i> Student Name</label>
                <input type="text" id="studentName" class="form-input" placeholder="Enter your full name">
            </div>
            <div class="form-group">
                <label class="form-label"><i class="fas fa-user-friends"></i> Father Name</label>
                <input type="text" id="fatherName" class="form-input" placeholder="Enter your father's name">
            </div>
            <div class="form-group">
                <label class="form-label"><i class="fas fa-envelope"></i> Email Address</label>
                <input type="email" id="email" class="form-input" placeholder="Enter your email address">
            </div>
            <div class="form-group">
                <label class="form-label"><i class="fas fa-phone"></i> Mobile Number (WhatsApp)</label>
                <input type="tel" id="mobile" class="form-input" placeholder="+92XXXXXXXXXX">
            </div>
            <div class="form-group">
                <label class="form-label"><i class="fas fa-city"></i> City / District</label>
                <input type="text" id="city" class="form-input" placeholder="Enter your city/district">
            </div>
            <button class="btn btn-primary" onclick="handleRegistration()">
                <span>Submit to Get Access to Quiz</span>
                <i class="fas fa-arrow-right"></i>
            </button>
            <button class="btn btn-red" style="margin-top: 3.75px;" onclick="showPage('signin-page')">
                <i class="fas fa-chevron-left"></i> Back to Home
            </button>
        </div>

        <div id="quiz-page" class="page">
            <div class="promo-banner">
                <h2><i class="fas fa-graduation-cap"></i> Unlock Your Potential with WHITE COAT WARRIORS</h2>
                <p>Boost your preparation with WHITE COAT WARRIORS's realistic online tests, crafted by experts to mirror the actual exam's pattern and challenge. Experience instant feedback, detailed analysis, and flexible online access – your pathway to confidence and success!</p>
            </div>

            <div class="quiz-header">
                <div class="quiz-title-container">
                    <h2 id="quiz-title"></h2>
                    <div class="quiz-info">
                        <span><i class="fas fa-book"></i> Subject: <span id="quiz-subject">English Grammar</span></span>
                        <span><i class="fas fa-clock"></i> Per MCQ: <span id="per-mcq-time">1</span> Minute</span>
                    </div>
                </div>
            </div>
            <div class="timer-container">
                <div class="timer" id="question-timer">60</div>
                <div class="timer total-timer" id="timer">40:00</div>
            </div>

            <div class="progress-container">
                <div class="progress-bar" id="quiz-progress"></div>
            </div>

            <div class="question-nav" id="question-nav"></div>
            
            <div class="question-container">
                <div class="question-text" id="question-text"></div>
                <div class="options-container" id="options-container"></div>
                <div class="reasoning" id="reasoning">
                    <div class="reasoning-title"><i class="fas fa-lightbulb"></i> Explanation:</div>
                    <div id="reasoning-text"></div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <button class="nav-btn btn-back" onclick="navigateQuestion('prev')">
                    <i class="fas fa-arrow-left"></i> Back
                </button>
                <button class="nav-btn btn-next" onclick="navigateQuestion('next')">
                    Next <i class="fas fa-arrow-right"></i>
                </button>
                <button class="nav-btn btn-reasoning disabled" id="reasoning-btn" onclick="toggleReasoning()">
                    <i class="fas fa-lightbulb"></i> Reasoning
                </button>
                <button class="nav-btn btn-submit" onclick="submitTest()">
                    Submit <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>

        <div id="results-page" class="page">
            <div class="results-header-buttons">
                <a id="website-link" href="#" target="_blank" class="btn btn-primary"><i class="fas fa-globe"></i> Website</a>
                <a id="whatsapp-contact-link" href="#" target="_blank" class="btn btn-whatsapp"><i class="fab fa-whatsapp"></i> Whatsapp Contact</a>
                <a id="whatsapp-community-link" href="#" target="_blank" class="btn btn-whatsapp"><i class="fas fa-users"></i> Whatsapp Community</a>
            </div>
            
            <div class="quick-stats">
                <div class="stat-card correct">
                    <div class="stat-value" id="correct-count">0</div>
                    <div class="stat-label">Correct</div>
                </div>
                <div class="stat-card incorrect">
                    <div class="stat-value" id="incorrect-count">0</div>
                    <div class="stat-label">Incorrect</div>
                </div>
                <div class="stat-card unanswered">
                    <div class="stat-value" id="unanswered-count">0</div>
                    <div class="stat-label">Unanswered</div>
                </div>
            </div>
            
            <div class="performance-meter">
                <div class="performance-fill" id="performance-fill"></div>
            </div>
            
            <div class="result-card">
                <h2><i class="fas fa-user-graduate"></i> Student Information</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Field</th>
                            <th>Detail</th>
                        </tr>
                    </thead>
                    <tbody id="student-info-table"></tbody>
                </table>
            </div>

            <div class="result-card">
                <h2><i class="fas fa-chart-bar"></i> Test Results</h2>
                <table>
                    <tbody id="quiz-results-table"></tbody>
                </table>
            </div>
            
            <div class="result-actions">
                <button class="btn btn-primary" onclick="restartTest()">
                    <i class="fas fa-redo"></i> Retake Full Test
                </button>
                <button class="btn btn-primary" onclick="retakeIncorrect()">
                    <i class="fas fa-bolt"></i> Retake Incorrect Questions
                </button>
                <button class="btn btn-primary" onclick="viewAllMcqs()">
                    <i class="fas fa-clipboard-list"></i> View All MCQs
                </button>
            </div>
        </div>

        <div id="all-mcqs-page" class="page">
            <h2><i class="fas fa-list-alt"></i> All MCQs and Solutions</h2>
            <div class="all-mcqs-list" id="all-mcqs-list"></div>
            <button class="btn btn-primary" onclick="showPage('results-page')">
                <i class="fas fa-arrow-left"></i> Back to Results
            </button>
        </div>
    </div>
    
    <script src="script.js"></script>
</body>
</html><script>// ***************************************************************
// !! IMPORTANT: GOOGLE APPS SCRIPT URL FOR DATA LOGGING !!
const SHEET_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbw2N316gzPWvSV7_59Mjx49idXLH8Sc7S_S0nHhvGjYxhhGjTm8UBnsRB4VGgeuluL0/exec';
// ***************************************************************

// Quiz Data
const quizData_WCW_PHY_0010 = [
    {
        question: "Q: What is the primary function of a unit vector?",
        options: [
            "To alter the overall units of a given vector quantity.",
            "To denote the spatial dimension of a vector.",
            "To exclusively represent the direction of another vector.",
            "To multiply the magnitude of a vector by a scalar."
        ],
        correctAnswer: 2,
        reasoning: "The Book theory states that a unit vector is dimensionless, has a magnitude of 1, and is used solely to represent the direction of another vector."
    },
    {
        question: "Q: The unit vectors `î`, `ĵ`, and `k̂` in the Cartesian system are specifically designed to perform what role without affecting other vector properties?",
        options: [
            "Modify the dimensional consistency of vector operations.",
            "Indicate only the direction along specific axes.",
            "Establish a new scaling factor for vector components.",
            "Quantify the overall length of a vector."
        ],
        correctAnswer: 1,
        reasoning: "The Book theory states that `î`, `ĵ`, `k̂` indicate direction only and do not change magnitude or dimensions."
    },
    {
        question: "Q: How is a null vector fundamentally defined?",
        options: [
            "As a vector with a magnitude of 1 and an arbitrary direction.",
            "As a vector whose direction is perpendicular to all other vectors.",
            "As a vector with a negative magnitude pointing in the opposite direction.",
            "As a vector with zero magnitude and an arbitrary direction."
        ],
        correctAnswer: 3,
        reasoning: "The Book theory states that a null vector is a vector with zero magnitude and an arbitrary direction."
    },
    {
        question: "Q: How is the operation of subtracting vector `B` from vector `A` conceptually understood?",
        options: [
            "It involves rotating vector `B` by 90 degrees before addition.",
            "It is directly achieved by subtracting the magnitudes and directions.",
            "It is defined as adding the negative of vector `B` to vector `A`.",
            "It is performed by finding the cross product of `A` and `B`."
        ],
        correctAnswer: 2,
        reasoning: "The Book theory states that subtracting a vector `B` from `A` is defined as adding the negative of `B` to `A`."
    },
    {
        question: "Q: What characterizes a negative vector relative to its original vector?",
        options: [
            "It has a magnitude of one and is perpendicular.",
            "It has the same magnitude but points in the opposite direction.",
            "It has the same direction but zero magnitude.",
            "It has half the magnitude and the same direction."
        ],
        correctAnswer: 1,
        reasoning: "The Book theory states that a negative vector has the same magnitude as the original but points in the opposite direction (180° rotation)."
    },
    {
        question: "Q: If a vector `A` is multiplied by a positive scalar `k`, what is the direction of the resultant vector `kA`?",
        options: [
            "It is perpendicular to `A`.",
            "It is an arbitrary direction.",
            "It is opposite to `A`.",
            "It is the same as `A`."
        ],
        correctAnswer: 3,
        reasoning: "The Book theory states that if `k > 0`, the resultant vector has the same direction as `A`."
    },
    {
        question: "Q: What is the fundamental process of decomposing a single vector into several constituent vectors?",
        options: [
            "Vector resolution.",
            "Vector summation.",
            "Vector scaling.",
            "Vector cross-product."
        ],
        correctAnswer: 0,
        reasoning: "The Book theory states that resolution of vectors is the process of splitting a single vector into two or more component vectors."
    },
    {
        question: "Q: What defines 'rectangular components' of a vector?",
        options: [
            "Components that have equal magnitudes.",
            "Components that are perpendicular to each other.",
            "Components that lie along curved paths.",
            "Components that are parallel to each other."
        ],
        correctAnswer: 1,
        reasoning: "The Book theory states that rectangular components are components that are perpendicular to each other."
    },
    {
        question: "Q: What is the effective value of a vector in a specific spatial orientation referred to as?",
        options: [
            "Its resultant.",
            "Its magnitude.",
            "Its component.",
            "Its unit vector."
        ],
        correctAnswer: 2,
        reasoning: "The Book theory states that the effective value of a vector in a particular direction is called a component of a vector."
    },
    {
        question: "Q: Which property of vector addition ensures that changing the order of vectors being added does not alter the final resultant?",
        options: [
            "The distributive property.",
            "The identity property.",
            "The associative property.",
            "The commutative property."
        ],
        correctAnswer: 3,
        reasoning: "The Book theory states that vector addition is commutative; the order of addition does not affect the resultant."
    },
    {
        question: "Q: A crucial prerequisite for geometrically adding multiple vectors is that they must all possess which common characteristic?",
        options: [
            "Similar magnitudes but varied directions.",
            "Orthogonal orientations relative to each other.",
            "The same units and represent the same type of quantity.",
            "Different units and unrelated quantities."
        ],
        correctAnswer: 2,
        reasoning: "The Book theory states that all vectors being added must have the same units and represent the same type of quantity."
    },
    {
        question: "Q: What kind of physical quantity is the outcome of a scalar product between two vectors?",
        options: [
            "A null vector.",
            "A scalar quantity.",
            "A unit vector.",
            "A vector quantity."
        ],
        correctAnswer: 1,
        reasoning: "The Book theory states that when two vectors are multiplied via a scalar product, the resultant is a scalar quantity."
    },
    {
        question: "Q: What kind of physical quantity is the outcome of a vector product between two vectors?",
        options: [
            "A vector quantity.",
            "A scalar quantity.",
            "A null scalar.",
            "A dimensionless scalar."
        ],
        correctAnswer: 0,
        reasoning: "The Book theory states that when two vectors are multiplied via a vector product, the resultant is a vector quantity."
    },
    {
        question: "Q: Which property describes the order independence of the scalar product of two vectors?",
        options: [
            "Anti-commutative.",
            "Associative.",
            "Distributive.",
            "Commutative."
        ],
        correctAnswer: 3,
        reasoning: "The Book theory states that the scalar product is commutative."
    },
    {
        question: "Q: Which property characterizes the order dependence of the vector product of two vectors?",
        options: [
            "Commutative.",
            "Associative.",
            "Anti-commutative.",
            "Distributive."
        ],
        correctAnswer: 2,
        reasoning: "The Book theory states that the vector product is anti-commutative."
    },
    {
        question: "Q: The direction of the resultant vector from a vector product is determined by a specific anatomical rule involving rotation of fingers. What is this rule called?",
        options: [
            "The Thumb Rule.",
            "The Right Hand Rule.",
            "The Left Hand Rule.",
            "The Head-to-Tail Rule."
        ],
        correctAnswer: 1,
        reasoning: "The Book theory states that the direction of the resultant vector for a cross product is determined by the Right Hand Rule."
    },
    {
        question: "Q: The analytical method for vector addition is considered superior to the geometric method due to which primary characteristic?",
        options: [
            "Its inherent lack of mathematical rigor.",
            "Its exclusive application to two vectors only.",
            "Its greater precision and accuracy.",
            "Its reliance on visual estimation."
        ],
        correctAnswer: 2,
        reasoning: "The Book theory states that the analytical method is a more precise and accurate method than the geometric method."
    },
    {
        question: "Q: A unit vector that is specifically used to represent quantities like area, being perpendicular to a surface, is termed what?",
        options: [
            "An axial unit vector.",
            "A tangent unit vector.",
            "A radial unit vector.",
            "A normal unit vector."
        ],
        correctAnswer: 3,
        reasoning: "The Book theory states that a normal unit vector (`n̂`) is perpendicular to a surface, useful for representing vector quantities like area."
    },
    {
        question: "Q: If the x-component of a vector is half its magnitude, what can be inferred about the relationship between its y-component and its magnitude?",
        options: [
            "The y-component will be less than half its magnitude.",
            "The y-component will also be half its magnitude.",
            "The y-component's square will be three-quarters of the magnitude squared.",
            "The y-component will be equal to the magnitude."
        ],
        correctAnswer: 2,
        reasoning: "The Book theory states `Ax = A cos θ` and `Ay = A sin θ`, and `|A| = √(Ax² + Ay²)`. If `Ax = A/2`, then `cos θ = 1/2`, which means `θ = 60°`. Consequently, `Ay = A sin 60° = A(√3/2)`. Squaring `Ay` gives `A²(3/4)`, so `Ay²` is three-quarters of `A²`."
    },
    {
        question: "Q: If a vector's magnitude is precisely equal to the sum of the absolute values of its x and y components, what must be its orientation relative to the axes?",
        options: [
            "It must be parallel to the x-axis.",
            "It must be perpendicular to the x-axis.",
            "It must be at a 45-degree angle to both axes.",
            "It must lie perfectly along either the x or y axis."
        ],
        correctAnswer: 3,
        reasoning: "The Book theory states `|A| = √(Ax² + Ay²)`. If `|A| = |Ax| + |Ay|`, this only holds if either `Ax` or `Ay` is zero, meaning the vector is purely along one axis. For example, if `Ay = 0`, then `|A| = √(Ax²) = |Ax|`, and `|Ax| + |Ay| = |Ax| + 0 = |Ax|`."
    },
    {
        question: "Q: If the scalar product of two non-zero vectors is negative, what does this definitively imply about the angle between them?",
        options: [
            "The angle is zero.",
            "The angle is obtuse.",
            "The angle is acute.",
            "The angle is ninety degrees."
        ],
        correctAnswer: 1,
        reasoning: "The Book theory states `A • B = AB cos θ`. For `A • B` to be negative, `cos θ` must be negative. This occurs when `θ` is an obtuse angle (between 90° and 180°)."
    },
    {
        question: "Q: If the magnitude of the vector product of two non-zero vectors is maximum, what is the geometric relationship between them?",
        options: [
            "They are parallel.",
            "They are anti-parallel.",
            "They are perpendicular.",
            "They are at an arbitrary angle."
        ],
        correctAnswer: 2,
        reasoning: "The Book theory states `|A × B| = AB sin θ`. The magnitude is maximum when `sin θ` is maximum, which occurs at `θ = 90°` (perpendicular)."
    },
    {
        question: "Q: A resultant vector `R` has a positive y-component and a negative x-component. To find its direction from the positive x-axis, how should the reference angle (found from `tan⁻¹(|Ry/Rx|)`) be adjusted?",
        options: [
            "Add it to 180 degrees.",
            "Subtract it from 360 degrees.",
            "Add it to 90 degrees.",
            "Subtract it from 180 degrees."
        ],
        correctAnswer: 3,
        reasoning: "The Book theory states for the 2nd Quadrant (`Rx < 0, Ry > 0`), the resultant angle `θR = 180° - θ`."
    },
    {
        question: "Q: If a resultant vector `R` has a negative y-component and a positive x-component, how is its true angle `θR` with the x-axis determined from the reference angle `θ`?",
        options: [
            "θR equals 360° - θ.",
            "θR equals 180° + θ.",
            "θR equals θ.",
            "θR equals 180° - θ."
        ],
        correctAnswer: 0,
        reasoning: "The Book theory states for the 4th Quadrant (`Rx > 0, Ry < 0`), the resultant angle `θR = 360° - θ`."
    },
    {
        question: "Q: If two vectors are added using their rectangular components, and the x-component of the resultant is zero, what does this indicate about the x-components of the individual vectors?",
        options: [
            "They must be equal in magnitude and point in the same direction.",
            "One must be positive, and the other must be negative, with unequal magnitudes.",
            "They must both be zero.",
            "They must be equal in magnitude and point in opposite directions."
        ],
        correctAnswer: 3,
        reasoning: "The Book theory states `Rx = Ax + Bx`. For `Rx = 0`, it means `Ax + Bx = 0`, implying `Ax = -Bx`. This means they are equal in magnitude but opposite in direction."
    },
    {
        question: "Q: Geometrically, the scalar product of two vectors `A` and `B` can be understood as the magnitude of `A` multiplied by what characteristic of `B`?",
        options: [
            "The area formed by `A` and `B`.",
            "The component of `B` parallel to `A`.",
            "The entire magnitude of `B`.",
            "The component of `B` perpendicular to `A`."
        ],
        correctAnswer: 1,
        reasoning: "The Book theory states that the geometric interpretation of scalar product is (Magnitude of A) × (Component of B parallel to A)."
    },
    {
        question: "Q: If three vectors, when arranged head-to-tail, form a closed triangle, what is the nature of their resultant sum?",
        options: [
            "It is a vector pointing outwards from the triangle.",
            "It is a vector with arbitrary direction.",
            "It is a null vector.",
            "It is a vector pointing inwards to the triangle."
        ],
        correctAnswer: 2,
        reasoning: "The Book theory states that a null vector can be obtained by addition (e.g., `A + (-A) = 0`). If vectors form a closed loop head-to-tail, the tail of the first vector coincides with the head of the last, meaning the displacement from start to end is zero, hence a null resultant."
    },
    {
        question: "Q: A force vector `F` acts along the positive x-axis. If it is multiplied by a scalar `k` to produce a new force vector `F'`, and `F'` now acts along the negative x-axis, what must be true about the scalar `k`?",
        options: [
            "k must be exactly zero.",
            "k must be a value between 0 and 1.",
            "k must be a positive value.",
            "k must be a negative value."
        ],
        correctAnswer: 3,
        reasoning: "The Book theory states that if `k < 0`, the resultant vector has the opposite direction to `A`. Since the direction reversed from positive to negative x-axis, `k` must be negative."
    },
    {
        question: "Q: The direction of the vector product `A × B` is intrinsically related to the spatial arrangement of the original vectors. How is this direction oriented with respect to the plane containing `A` and `B`?",
        options: [
            "It lies within the same plane as `A` and `B`.",
            "It forms an acute angle with the plane.",
            "It is perpendicular to the plane containing `A` and `B`.",
            "It is always parallel to one of the vectors."
        ],
        correctAnswer: 2,
        reasoning: "The Book theory states that the direction of the resultant vector is perpendicular to the plane containing `A` and `B`."
    },
    {
        question: "Q: Given that `A × B = - (B × A)`, what is the fundamental implication of swapping the order of vectors in a cross product operation?",
        options: [
            "Both magnitude and direction of the resultant vector change.",
            "The resultant vector becomes a scalar.",
            "Only the magnitude of the resultant vector changes.",
            "The direction of the resultant vector reverses."
        ],
        correctAnswer: 3,
        reasoning: "The Book theory states `A × B = - (B × A)`, which explicitly means the direction reverses if the order is swapped, while the magnitude remains the same."
    },
    {
        question: "Q: A vector `V` has its x-component `Vx` equal to its y-component `Vy`. What does this indicate about the angle the vector makes with the positive x-axis?",
        options: [
            "It must be 45 degrees.",
            "It must be 0 degrees.",
            "It must be 90 degrees.",
            "It must be 180 degrees."
        ],
        correctAnswer: 0,
        reasoning: "The Book theory states `Vx = V cos θ` and `Vy = V sin θ`. If `Vx = Vy`, then `V cos θ = V sin θ`, which implies `cos θ = sin θ`. This condition is met when `θ = 45°` (in the first quadrant)."
    },
    {
        question: "Q: When adding more than two vectors using the head-to-tail rule, what can be concluded about the final resultant if the vectors are added in a different sequence?",
        options: [
            "The direction changes, but the magnitude remains constant.",
            "The magnitude changes, but the direction remains constant.",
            "The resultant becomes a null vector if the order is rearranged.",
            "Both the magnitude and direction of the resultant remain unchanged."
        ],
        correctAnswer: 3,
        reasoning: "The Book theory states that the head-to-tail rule extends to any number of vectors, and the sum is independent of the order of addition (commutative property holds). Thus, both magnitude and direction remain unchanged."
    },
    {
        question: "Q: Work is defined as a scalar product of force and displacement. If a constant force acts on an object, but no work is done by this force, what can be said about the geometric relationship between the force and the displacement?",
        options: [
            "They are at an arbitrary angle.",
            "They are parallel.",
            "They are perpendicular.",
            "They are anti-parallel."
        ],
        correctAnswer: 2,
        reasoning: "The Book theory identifies Work as an example of a scalar product, which is `A • B = AB cos θ`. If Work is zero for non-zero force and displacement, then `cos θ` must be zero, meaning `θ = 90°` (perpendicular)."
    },
    {
        question: "Q: If two vectors define a parallelogram, and the magnitude of their vector product is exactly half the product of their individual magnitudes, what does this imply about the angle between them?",
        options: [
            "The angle is 0 degrees.",
            "The angle is 60 degrees.",
            "The angle is 90 degrees.",
            "The angle is 30 degrees."
        ],
        correctAnswer: 3,
        reasoning: "The Book theory states `|A × B| = AB sin θ`, and this magnitude represents the area of the parallelogram. If `|A × B| = (1/2)AB`, then `AB sin θ = (1/2)AB`, implying `sin θ = 1/2`. This occurs when `θ = 30°`."
    },
    {
        question: "Q: What does the magnitude of the vector product of two vectors `A` and `B` intrinsically represent in a geometric sense?",
        options: [
            "The volume of a cuboid formed by `A` and `B`.",
            "The area of the parallelogram determined by `A` and `B`.",
            "The length of the diagonal of a rectangle.",
            "The perimeter of the triangle formed by `A` and `B`."
        ],
        correctAnswer: 1,
        reasoning: "The Book theory states that the magnitude of `A × B` geometrically represents the area of the parallelogram determined by vectors `A` and `B`."
    },
    {
        question: "Q: A crucial initial step in the geometric (head-to-tail) method for vector addition involves sketching the first vector using what two fundamental properties?",
        options: [
            "Only its direction and arbitrary length.",
            "Its magnitude and component values.",
            "Its specific scale and accurate direction.",
            "Its angle with the y-axis and unit vector."
        ],
        correctAnswer: 2,
        reasoning: "The Book theory states the steps involve sketching the first vector with scale and direction."
    },
    {
        question: "Q: If the magnitude of a resultant vector `R` is equal to the absolute sum of its x and y components, what is the geometric consequence?",
        options: [
            "The resultant vector must be purely horizontal.",
            "The resultant vector must be oriented at 45 degrees to the axes.",
            "The resultant vector must be purely vertical.",
            "The resultant vector must lie along one of the coordinate axes."
        ],
        correctAnswer: 3,
        reasoning: "The Book theory states `|R| = √(Rx² + Ry²)`. If `|R| = |Rx| + |Ry|`, this equation only holds true if either `Rx` or `Ry` is zero. For instance, if `Ry = 0`, then `|R| = √(Rx²) = |Rx|`, and `|Rx| + |Ry| = |Rx| + 0 = |Rx|`. This means the vector lies entirely along the x-axis or y-axis."
    },
    {
        question: "Q: If two vectors `P` and `Q` are orthogonal (perpendicular) to each other, and neither is a null vector, what will be the value of their scalar product?",
        options: [
            "A positive value.",
            "Equal to the product of their magnitudes.",
            "Zero.",
            "A negative value."
        ],
        correctAnswer: 2,
        reasoning: "The Book theory states `A • B = AB cos θ`. If vectors are orthogonal, `θ = 90°`, and `cos 90° = 0`. Therefore, the scalar product will be zero."
    },
    {
        question: "Q: If two non-null vectors `A` and `B` are parallel, what can be concluded about the magnitude of their vector product?",
        options: [
            "It will be equal to the product of their magnitudes.",
            "It will be exactly zero.",
            "It will be at its maximum possible value.",
            "It will be equal to half the product of their magnitudes."
        ],
        correctAnswer: 1,
        reasoning: "The Book theory states `|A × B| = AB sin θ`. If vectors are parallel, `θ = 0°`, and `sin 0° = 0`. Therefore, the magnitude of the vector product will be zero."
    },
    {
        question: "Q: A resultant vector `R` has `Rx = -3` and `Ry = -4`. If a calculator provides a reference angle `θ` (from `tan⁻¹(|Ry/Rx|)`) as approximately 53.1 degrees, what is the correct angle `θR` with the positive x-axis?",
        options: [
            "53.1 degrees.",
            "306.9 degrees.",
            "233.1 degrees.",
            "126.9 degrees."
        ],
        correctAnswer: 2,
        reasoning: "The Book theory states for the 3rd Quadrant (`Rx < 0, Ry < 0`), the resultant angle `θR = 180° + θ`. So, `θR = 180° + 53.1° = 233.1°`."
    },
    {
        question: "Q: Why might the geometric method of vector addition be considered less suitable for engineering calculations requiring high accuracy compared to the analytical method?",
        options: [
            "It is restricted to vectors with only integer magnitudes.",
            "It does not account for vector directions.",
            "It can only handle two vectors at a time.",
            "It relies on visual measurements and drawing scales, which introduce imprecision."
        ],
        correctAnswer: 3,
        reasoning: "The Book theory states that the analytical method is more precise and accurate, implying the geometric method, which involves drawing to scale and measuring lengths/angles (Page 13, Steps 3-4), introduces inherent imprecision."
    },
    {
        question: "Q: If a vector `A` is multiplied by a scalar `k` and the resultant is a null vector, and `A` itself is not a null vector, what must be the value of `k`?",
        options: [
            "k must be any non-zero real number.",
            "k must be a negative integer.",
            "k must be exactly zero.",
            "k must be a positive integer."
        ],
        correctAnswer: 2,
        reasoning: "The Book theory states that if `k = 0`, the resultant is a null vector (`0`). Since `A` is not a null vector, `k` must be zero for `kA` to be a null vector."
    },
    {
        question: "Q: A vector `A` has an x-component given by `A cos θ` and a y-component by `A sin θ`. How is this vector `A` expressed using Cartesian unit vectors?",
        options: [
            "A = (A sin θ)î + (A cos θ)ĵ",
            "A = A cos θ - A sin θ",
            "A = √(A cos θ)² + (A sin θ)²",
            "A = (A cos θ)î + (A sin θ)ĵ"
        ],
        correctAnswer: 3,
        reasoning: "The Book theory explicitly states the vector form (2D) as `A = (A cos θ)î + (A sin θ)ĵ`."
    },
    {
        question: "Q: In the Cartesian coordinate system, which unit vector is specifically aligned with the y-axis?",
        options: [
            "n̂",
            "ĵ",
            "î",
            "k̂"
        ],
        correctAnswer: 1,
        reasoning: "The Book theory states that `ĵ` is along the y-axis."
    },
    {
        question: "Q: The head-to-tail rule for vector addition can be applied to how many vectors?",
        options: [
            "Only vectors of equal magnitude.",
            "A maximum of three vectors.",
            "Any number of vectors.",
            "Only two vectors."
        ],
        correctAnswer: 2,
        reasoning: "The Book theory states that the head-to-tail rule extends to any number of vectors."
    },
    {
        question: "Q: What are the individual vectors obtained from the process of splitting a main vector?",
        options: [
            "Resultant vectors.",
            "Null vectors.",
            "Scalar products.",
            "Component vectors."
        ],
        correctAnswer: 3,
        reasoning: "The Book theory states that the vectors obtained from resolving a main vector are called components."
    },
    {
        question: "Q: If a vector's x, y, and z components are known, how does the magnitude of the vector relate to these components?",
        options: [
            "It is the product of the components.",
            "It is the sum of the cubes of the components.",
            "It is the square root of the sum of the squares of the components.",
            "It is the sum of the components."
        ],
        correctAnswer: 2,
        reasoning: "The Book theory states the magnitude from components (3D) as `|A| = √(Ax² + Ay² + Az²)`. This describes the relation without using specific mathematical symbols in the option text."
    },
    {
        question: "Q: Consider the Cartesian unit vectors `î` and `ĵ`. If you compute `î × ĵ`, what is the direction of the resultant unit vector?",
        options: [
            "Along the positive y-axis.",
            "Along the positive z-axis.",
            "Along the negative z-axis.",
            "Along the positive x-axis."
        ],
        correctAnswer: 1,
        reasoning: "The Book theory uses the Right Hand Rule for vector product direction. If `A` is `î` (along x) and `B` is `ĵ` (along y), rotating fingers from x to y (counter-clockwise in xy plane) points the thumb along the positive z-axis, which corresponds to `k̂`."
    },
    {
        question: "Q: What is the scalar product of a unit vector `î` with itself (`î • î`)?",
        options: [
            "Negative one.",
            "Zero.",
            "Positive one.",
            "Undefined."
        ],
        correctAnswer: 2,
        reasoning: "The Book theory states `A • B = AB cos θ`. For `î • î`, both vectors have magnitude 1 (`|î| = 1`), and the angle between them is `0°` (`cos 0° = 1`). Therefore, `1 * 1 * 1 = 1`."
    },
    {
        question: "Q: Under what specific condition, involving the cross product of two non-null vectors, would the resultant be a null vector?",
        options: [
            "When the vectors are perpendicular.",
            "When the vectors have different magnitudes.",
            "When the vectors are oriented at 45 degrees.",
            "When the vectors are parallel or anti-parallel."
        ],
        correctAnswer: 3,
        reasoning: "The Book theory states `|A × B| = AB sin θ`. For the resultant to be a null vector (zero magnitude), `sin θ` must be zero. This occurs when `θ = 0°` (parallel) or `θ = 180°` (anti-parallel). The Book also mentions null vector formation by cross multiplication."
    }
];

// Constants
const QUIZ_ACCESS_CODE = "PreMium-A-12345";
const DEV_ACCESS_CODE = "Dev-PDA-001";
const ACADEMY_NAME = "WHITE COAT WORRIORS ";
const QUIZ_SUBJECT = "Physics ";
const WEBSITE_LINK = "https://premiumdoctoracademy.com";
const WHATSAPP_CONTACT = "03287743851";
const WHATSAPP_COMMUNITY = "https://whatsapp.com/channel/0029VaFCIU6EquiOlXWcNR1X";
const TIME_PER_MCQ = 60;
const MARK_PER_MCQ = 1;
const NEGATIVE_MARKING = 0;

// Global state variables
let currentQuizId = 'WCW-PHY-0010';
let quizData = quizData_WCW_PHY_0010;
let currentQuestion = 0;
let userAnswers = Array(quizData.length).fill(null);
let timeLeft;
let questionTimeLeft;
let totalTimeInterval;
let questionTimeInterval;
let studentData = {};
let studentAccessCode = "";

// DOM elements
const questionNavEl = document.getElementById('question-nav');
const questionTextEl = document.getElementById('question-text');
const optionsContainerEl = document.getElementById('options-container');
const reasoningEl = document.getElementById('reasoning');
const reasoningTextEl = document.getElementById('reasoning-text');
const quizTitleEl = document.getElementById('quiz-title');
const quizSubjectEl = document.getElementById('quiz-subject');
const perMcqTimeEl = document.getElementById('per-mcq-time');
const totalTimerEl = document.getElementById('timer');
const questionTimerEl = document.getElementById('question-timer');
const quizProgressEl = document.getElementById('quiz-progress');
const studentInfoTable = document.getElementById('student-info-table');
const quizResultsTable = document.getElementById('quiz-results-table');
const allMcqsList = document.getElementById('all-mcqs-list');
const devPasswordInput = document.getElementById('developerPassword');
const devErrorBox = document.getElementById('dev-error-box');
const quizAccessCodeInput = document.getElementById('quizAccessCode');
const quizAccessErrorBox = document.getElementById('quiz-error-box');
const toggleDevPasswordIcon = document.getElementById('toggleDeveloperPassword');
const toggleQuizCodeIcon = document.getElementById('toggleQuizAccessCode');
const websiteLinkEl = document.getElementById('website-link');
const whatsappContactLinkEl = document.getElementById('whatsapp-contact-link');
const whatsappCommunityLinkEl = document.getElementById('whatsapp-community-link');
const reasoningBtn = document.getElementById('reasoning-btn');
const quizNotificationEl = document.getElementById('quiz-notification');
const notificationTitleEl = document.getElementById('notification-title');
const notificationMessageEl = document.getElementById('notification-message');
const notificationYesBtn = document.getElementById('notification-yes');
const notificationNoBtn = document.getElementById('notification-no');
const correctCountEl = document.getElementById('correct-count');
const incorrectCountEl = document.getElementById('incorrect-count');
const unansweredCountEl = document.getElementById('unanswered-count');
const performanceFillEl = document.getElementById('performance-fill');


/**
 * @description Sends data to the Google Apps Script endpoint.
 * @param {object} data - The payload containing type ('registration' or 'quiz_result') and data.
 */
function sendDataToSheet(data) {
    if (!SHEET_SCRIPT_URL || SHEET_SCRIPT_URL.includes('YOUR_DEPLOYED_WEB_APP_URL')) {
        console.error('SHEET_SCRIPT_URL is not configured. Data not sent to Google Sheet.');
        return Promise.resolve({ success: false, message: 'Script URL not configured.' });
    }

    return fetch(SHEET_SCRIPT_URL, {
        method: 'POST',
        // 'no-cors' is necessary for Apps Script to accept cross-origin POST requests from a web page
        mode: 'no-cors',
        cache: 'no-cache',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(data)
    })
    .then(response => {
        // Cannot read response body with 'no-cors', assume request was sent successfully
        return { success: true, message: 'Request sent to Google Script.' };
    })
    .catch(error => {
        console.error('Sheet Data Send Error:', error);
        return { success: false, message: 'Failed to send request to Google Script.' };
    });
}


// Initialization
document.addEventListener('DOMContentLoaded', () => {
    const storedStudentData = localStorage.getItem('studentData');
    if (storedStudentData) {
        studentData = JSON.parse(storedStudentData);
        document.getElementById('studentName').value = studentData['Student Name'] || '';
        document.getElementById('fatherName').value = studentData['Father Name'] || '';
        document.getElementById('email').value = studentData['Email'] || '';
        document.getElementById('mobile').value = studentData['Mobile'] || '';
        document.getElementById('city').value = studentData['City'] || '';
    }
    const storedCode = localStorage.getItem('studentAccessCode');
    if (storedCode) {
        studentAccessCode = storedCode;
    }
    
    showPage('signin-page');
    
    if (toggleDevPasswordIcon) toggleDevPasswordIcon.addEventListener('click', () => togglePasswordVisibility('developerPassword', 'toggleDeveloperPassword'));
    if (toggleQuizCodeIcon) toggleQuizCodeIcon.addEventListener('click', () => togglePasswordVisibility('quizAccessCode', 'toggleQuizAccessCode'));
});

function showQuizNotification(title, message, type = 'info') {
    const allowedNotifications = ['Registration Successful', 'Access Granted', 
                                 'Quiz Completed!', 'Quiz Reset', 'Registration Error', 'Submission Error', 'Registration Warning'];
    
    if (!allowedNotifications.includes(title)) {
        return;
    }
    
    notificationTitleEl.textContent = title;
    notificationMessageEl.textContent = message;
    
    quizNotificationEl.classList.remove('warning', 'error');
    
    if (type === 'warning') {
        quizNotificationEl.classList.add('warning');
    } else if (type === 'error') {
        quizNotificationEl.classList.add('error');
    }
    
    quizNotificationEl.classList.add('show');
    
    setTimeout(() => {
        if (quizNotificationEl.classList.contains('show')) {
            hideQuizNotification();
        }
    }, 5000);
}

function hideQuizNotification() {
    quizNotificationEl.classList.remove('show');
}

function showPage(pageId) {
    const pages = document.querySelectorAll('.page');
    pages.forEach(page => page.classList.remove('active'));
    document.getElementById(pageId).classList.add('active');
    document.querySelectorAll('.error-box, .success-box').forEach(el => el.style.display = 'none');
}

function togglePasswordVisibility(inputID, iconID) {
    const passwordInput = document.getElementById(inputID);
    const toggleIcon = document.getElementById(iconID);
    
    if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        toggleIcon.classList.remove('fa-eye-slash');
        toggleIcon.classList.add('fa-eye');
    } else {
        passwordInput.type = 'password';
        toggleIcon.classList.remove('fa-eye');
        toggleIcon.classList.add('fa-eye-slash');
    }
}

function showQuizAccessForm() {
    document.getElementById('quiz-access-form').style.display = 'flex';
    document.getElementById('developer-access-form').style.display = 'none';
}

function showDeveloperAccessForm() {
    document.getElementById('developer-access-form').style.display = 'flex';
    document.getElementById('quiz-access-form').style.display = 'none';
}

function showRegistrationPage() {
    showPage('registration-page');
}

// Registration Handler
function generateAccessCode(studentName, fatherName) {
    const studentInitials = studentName.split(' ').map(n => n[0]).join('').toUpperCase();
    const fatherInitials = fatherName.split(' ').map(n => n[0]).join('').toUpperCase();
    const uniqueId = Math.random().toString(36).substring(2, 7).toUpperCase();

    return `${ACADEMY_NAME.replace(/\s+/g, '-')}-${studentInitials}${fatherInitials}-${uniqueId}`;
}

function handleRegistration() {
    const sName = document.getElementById('studentName').value.trim();
    const fName = document.getElementById('fatherName').value.trim();
    const email = document.getElementById('email').value.trim();
    const mobile = document.getElementById('mobile').value.trim();
    const city = document.getElementById('city').value.trim();
    
    if (!sName || !fName || !email || !mobile || !city) {
        showQuizNotification('Registration Error', 'Please fill in all the registration details.', 'error');
        return;
    }
    
    // Generate access code
    const generatedCode = generateAccessCode(sName, fName);
    studentAccessCode = generatedCode;

    studentData = {
        'Student Name': sName,
        'Father Name': fName,
        'Email': email,
        'Mobile': mobile,
        'City': city
    };

    // --- NEW: SEND REGISTRATION DATA TO GOOGLE SHEET ---
    const registrationDataToSend = {
        type: 'registration',
        accessCode: generatedCode,
        studentName: sName,
        fatherName: fName,
        email: email,
        mobile: mobile,
        city: city
    };
    
    sendDataToSheet(registrationDataToSend)
        .then(response => {
            console.log('Sheet Registration Response:', response);
            showQuizNotification('Registration Successful', `Your code: ${generatedCode}. Data submitted to sheet.`, 'info');
        })
        .catch(error => {
            console.error('Sheet Registration Error:', error);
            showQuizNotification('Registration Warning', `Registration saved locally, but sheet submission failed.`, 'warning');
        });
    // ----------------------------------------------------
    
    // Store data locally
    localStorage.setItem('studentAccessCode', generatedCode);
    localStorage.setItem('studentData', JSON.stringify(studentData));
    
    const registrations = JSON.parse(localStorage.getItem('wcwRegistrations') || '[]');
    registrations.push({
        ...studentData,
        accessCode: generatedCode,
        timestamp: new Date().toISOString()
    });
    localStorage.setItem('wcwRegistrations', JSON.stringify(registrations));
    
    
    // Start the quiz after registration
    startQuiz('WCW-PHY-0010', 'Student', generatedCode);
}

// Quiz Access Handler
function checkDeveloperPassword() {
    devErrorBox.style.display = 'none';
    if (devPasswordInput.value === DEV_ACCESS_CODE) {
        showQuizNotification('Access Granted', 'Welcome! You have successfully logged in as a developer.', 'info');
        startQuiz('WCW-PHY-0010', 'Developer', DEV_ACCESS_CODE);
    } else {
        devErrorBox.style.display = 'block';
    }
}

function accessQuiz(inputCode) {
    const errorBox = document.getElementById('quiz-error-box');
    errorBox.style.display = 'none';
    
    const storedStudentCode = localStorage.getItem('studentAccessCode');
    
    if (inputCode === QUIZ_ACCESS_CODE || inputCode === DEV_ACCESS_CODE || inputCode === storedStudentCode) {
        showQuizNotification('Access Granted', 'Welcome! You can now start the quiz.', 'info');
        startQuiz('WCW-PHY-0010', 'Student', inputCode);
    } else {
        errorBox.style.display = 'block';
    }
}

function startQuiz(quizId, userType, code) {
    currentQuizId = quizId;
    quizData = quizData_WCW_PHY_0010;
    
    // Always start fresh - no progress restoration
    currentQuestion = 0;
    userAnswers = Array(quizData.length).fill(null);
    
    timeLeft = quizData.length * TIME_PER_MCQ;
    questionTimeLeft = TIME_PER_MCQ;
    
    localStorage.setItem('lastAccessCode', code);

    showPage('quiz-page');
    initQuiz();
}

// Quiz Logic
function initQuiz() {
    quizSubjectEl.textContent = QUIZ_SUBJECT;
    perMcqTimeEl.textContent = Math.floor(TIME_PER_MCQ / 60);
    
    websiteLinkEl.href = WEBSITE_LINK;
    whatsappContactLinkEl.href = 'https://wa.me/' + WHATSAPP_CONTACT;
    whatsappCommunityLinkEl.href = WHATSAPP_COMMUNITY;
    
    quizTitleEl.textContent = `Test - ID: ${currentQuizId}`;
    renderQuestionNav();
    renderQuestion();

    if (totalTimeInterval) clearInterval(totalTimeInterval);
    if (questionTimeInterval) clearInterval(questionTimeInterval);
    
    totalTimeInterval = setInterval(updateTotalTimer, 1000);
    questionTimeInterval = setInterval(updateQuestionTimer, 1000);
}

function updateTotalTimer() {
    if (timeLeft > 0) {
        timeLeft--;
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        totalTimerEl.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
    } else {
        clearInterval(totalTimeInterval);
        submitTest(true);
    }
}

function updateQuestionTimer() {
    if (questionTimeLeft > 0) {
        questionTimeLeft--;
        questionTimerEl.textContent = `${questionTimeLeft}`;
    } else {
        questionTimeLeft = TIME_PER_MCQ;
        navigateQuestion('next');
    }
}

function renderQuestionNav() {
    questionNavEl.innerHTML = '';
    quizData.forEach((_, index) => {
        const navItem = document.createElement('div');
        navItem.classList.add('question-nav-item');
        navItem.textContent = index + 1;
        navItem.onclick = () => navigateQuestion(index);
        
        if (index === currentQuestion) {
            navItem.classList.add('current');
        } else if (userAnswers[index] !== null) {
            navItem.classList.add('solved');
        } else if (userAnswers.slice(0, index).some(ans => ans !== null) || index < currentQuestion) {
             navItem.classList.add('visited');
        }
        
        questionNavEl.appendChild(navItem);
    });
    updateProgressBar();
}

function updateProgressBar() {
    const solvedCount = userAnswers.filter(answer => answer !== null).length;
    const progress = (solvedCount / quizData.length) * 100;
    quizProgressEl.style.width = `${progress}%`;
}

function renderQuestion() {
    reasoningEl.style.display = 'none';
    reasoningBtn.classList.add('disabled');
    const question = quizData[currentQuestion];
    questionTextEl.textContent = `${currentQuestion + 1}. ${question.question}`;
    
    optionsContainerEl.innerHTML = '';
    question.options.forEach((option, index) => {
        const optionEl = document.createElement('div');
        optionEl.classList.add('option');
        optionEl.textContent = option;
        
        const isAnswered = userAnswers[currentQuestion] !== null;

        if (!isAnswered) {
            optionEl.onclick = () => selectOption(index);
        } else {
            if (index === question.correctAnswer) {
                optionEl.classList.add('correct');
            } else if (index === userAnswers[currentQuestion]) {
                optionEl.classList.add('incorrect');
            }
        }
        
        if (userAnswers[currentQuestion] === index) {
            optionEl.classList.add('selected');
        }

        optionsContainerEl.appendChild(optionEl);
    });
    
    questionTimeLeft = TIME_PER_MCQ;
    questionTimerEl.textContent = `${questionTimeLeft}`;
    renderQuestionNav();
    
    if (userAnswers[currentQuestion] !== null) {
        reasoningBtn.classList.remove('disabled');
    }
}

function selectOption(optionIndex) {
    const question = quizData[currentQuestion];
    userAnswers[currentQuestion] = optionIndex;
    
    reasoningBtn.classList.remove('disabled');
    
    const options = optionsContainerEl.querySelectorAll('.option');
    options.forEach((option, index) => {
        option.onclick = null;
        option.classList.remove('selected', 'correct', 'incorrect');
        
        if (index === question.correctAnswer) {
            option.classList.add('correct');
        } else if (index === optionIndex) {
            option.classList.add('incorrect');
        }
        
        if (index === optionIndex) {
             option.classList.add('selected');
        }
    });

    renderQuestionNav();
    
    setTimeout(() => {
        navigateQuestion('next');
    }, 800);
}

function navigateQuestion(direction) {
    const totalQuestions = quizData.length;
    let nextIndex;

    if (typeof direction === 'number') {
        nextIndex = direction;
    } else if (direction === 'next') {
        nextIndex = (currentQuestion + 1) % totalQuestions;
    } else if (direction === 'prev') {
        nextIndex = (currentQuestion - 1 + totalQuestions) % totalQuestions;
    } else {
        return;
    }

    if (nextIndex === currentQuestion) return;
    
    currentQuestion = nextIndex;
    renderQuestion();
}

function toggleReasoning() {
    if (reasoningBtn.classList.contains('disabled')) return;
    
    const question = quizData[currentQuestion];
    if (reasoningEl.style.display === 'block') {
        reasoningEl.style.display = 'none';
    } else {
        reasoningTextEl.textContent = question.reasoning;
        reasoningEl.style.display = 'block';
    }
}

function submitTest(isTimeout = false) {
    if (!isTimeout && !confirm('Are you sure you want to submit the quiz?')) {
        return;
    }
    
    clearInterval(totalTimeInterval);
    clearInterval(questionTimeInterval);

    let correct = 0;
    let incorrect = 0;
    let unanswered = 0;

    quizData.forEach((question, index) => {
        if (userAnswers[index] === null) {
            unanswered++;
        } else if (userAnswers[index] === question.correctAnswer) {
            correct++;
        } else {
            incorrect++;
        }
    });

    const totalQuestions = quizData.length;
    const totalScore = (correct * MARK_PER_MCQ) - (incorrect * NEGATIVE_MARKING);
    const totalMarks = totalQuestions * MARK_PER_MCQ;

    correctCountEl.textContent = correct;
    incorrectCountEl.textContent = incorrect;
    unansweredCountEl.textContent = unanswered;
    
    const performancePercentage = (correct / totalQuestions) * 100;
    performanceFillEl.style.width = `${performancePercentage}%`;

    const savedStudentData = JSON.parse(localStorage.getItem('studentData') || '{}');
    const lastAccessCode = localStorage.getItem('lastAccessCode') || 'N/A';
    
    let studentInfoHtml = '';
    for (const [key, value] of Object.entries(savedStudentData)) {
        studentInfoHtml += `<tr><td>${key}</td><td>${value}</td></tr>`;
    }
    studentInfoHtml += `<tr><td>Access Code Used</td><td>${lastAccessCode}</td></tr>`;
    studentInfoTable.innerHTML = studentInfoHtml;

    quizResultsTable.innerHTML = `
        <tr><td>Quiz ID</td><td>${currentQuizId}</td></tr>
        <tr><td>Total Questions</td><td>${totalQuestions}</td></tr>
        <tr><td>Correct Answers</td><td>${correct}</td></tr>
        <tr><td>Incorrect Answers</td><td>${incorrect}</td></tr>
        <tr><td>Unanswered</td><td>${unanswered}</td></tr>
        <tr><td>Your Score</td><td>${totalScore} / ${totalMarks}</td></tr>
    `;

    // --- NEW: SEND QUIZ RESULTS TO GOOGLE SHEET ---
    if (lastAccessCode && lastAccessCode !== 'N/A') {
        const resultsDataToSend = {
            type: 'quiz_result',
            accessCode: lastAccessCode,
            quizId: currentQuizId,
            totalQuestions: totalQuestions,
            correct: correct,
            incorrect: incorrect,
            unanswered: unanswered,
            totalScore: totalScore,
            totalMarks: totalMarks,
            studentName: savedStudentData['Student Name'] || 'Unknown' 
        };

        sendDataToSheet(resultsDataToSend)
            .then(response => {
                console.log('Sheet Results Update Response:', response);
            })
            .catch(error => {
                console.error('Sheet Results Update Error:', error);
                showQuizNotification('Submission Error', 'Failed to send results to the server sheet.', 'error');
            });
    }
    // ----------------------------------------------------


    const results = JSON.parse(localStorage.getItem('wcwQuizResults') || '[]');
    results.push({
        studentName: savedStudentData['Student Name'] || 'Unknown',
        accessCode: lastAccessCode,
        quizId: currentQuizId,
        totalQuestions: totalQuestions,
        correct: correct,
        incorrect: incorrect,
        unanswered: unanswered,
        totalScore: totalScore,
        totalMarks: totalMarks,
        timestamp: new Date().toISOString()
    });
    localStorage.setItem('wcwQuizResults', JSON.stringify(results));
    
    showQuizNotification('Quiz Completed!', `Your score: ${totalScore}/${totalMarks}. Check the results page for details.`, 'info');
    
    showPage('results-page');
}

function restartTest() {
    if (confirm('Are you sure you want to retake the full test? Your current progress will be lost.')) {
        quizData = quizData_WCW_PHY_0010;
        currentQuestion = 0;
        userAnswers = Array(quizData.length).fill(null);
        timeLeft = quizData.length * TIME_PER_MCQ;
        
        showPage('quiz-page');
        initQuiz();
    }
}

function retakeIncorrect() {
    const incorrectIndices = quizData.map((question, index) => {
        const isIncorrect = userAnswers[index] !== null && 
                            userAnswers[index] !== question.correctAnswer;
        return isIncorrect ? index : -1;
    }).filter(index => index !== -1);
    
    if (incorrectIndices.length === 0) {
        showQuizNotification('No Incorrect Questions', 'You have no incorrect questions to retake!', 'info');
        return;
    }
    
    quizData = incorrectIndices.map(index => quizData_WCW_PHY_0010[index]);
    currentQuestion = 0;
    userAnswers = Array(quizData.length).fill(null);
    timeLeft = quizData.length * TIME_PER_MCQ;
    
    showPage('quiz-page');
    initQuiz();
}

function viewAllMcqs() {
    allMcqsList.innerHTML = '';
    quizData_WCW_PHY_0010.forEach((question, index) => {
        const mcqItem = document.createElement('div');
        mcqItem.classList.add('all-mcq-item');
        mcqItem.innerHTML = `
            <div class="question-text">${index + 1}. ${question.question}</div>
            <div class="all-mcq-options">
                ${question.options.map((option, optIndex) => `
                    <div class="all-mcq-option ${optIndex === question.correctAnswer ? 'correct' : ''}">
                        ${option}
                    </div>
                `).join('')}
            </div>
            <div class="all-mcq-reasoning">
                <strong>Reasoning:</strong> ${question.reasoning}
            </div>
        `;
        allMcqsList.appendChild(mcqItem);
    });
    showPage('all-mcqs-page');
}</script>